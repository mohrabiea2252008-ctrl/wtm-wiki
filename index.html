<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HATED FAMILY</title>
<meta name="description" content="I WANNA KMS" />
<style>
  :root{
    --bg:#071021;
    --bg-2:#0b1620;
    --card:#0e1b24;
    --muted:#9fb6c8;
    --accent:#ff6b6b;
    --glass: rgba(255,255,255,0.03);
    --panel:#0c151a;
    --pill:#11222b;
    --maxw:1200px;
    --radius:12px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#e6f2f8;
    background:
      radial-gradient(800px 360px at 10% 10%, rgba(14,30,45,0.6), transparent),
      linear-gradient(180deg,var(--bg),var(--bg-2));
    -webkit-font-smoothing:antialiased;
    padding:18px;display:flex;justify-content:center;
  }
  .wrap{max-width:var(--maxw);width:100%;}
  .header{margin-bottom:20px;display:flex;flex-direction:column;align-items:center;text-align:center;}
  .header h1{margin:0;font-size:32px;color:var(--accent);text-transform:uppercase;letter-spacing:2px;}
  .header p{margin:5px 0 0 0;color:var(--muted);font-size:16px;}
  .controls{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-bottom:16px;align-items:center;}
  .filters{
    display:flex;gap:8px;flex-wrap:wrap;justify-content:center;
  }
  .filter-button{
    background:var(--pill);color:var(--muted);border:1px solid #1f3747;
    padding:6px 12px;border-radius:20px;cursor:pointer;font-size:13px;
    transition:background-color .2s,border-color .2s,color .2s;
  }
  .filter-button:hover{border-color:var(--accent);color:#e6f2f8;}
  .filter-button.active{background:var(--accent);color:var(--bg);border-color:var(--accent);font-weight:600;}

  .tier-bar{
    display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-top:6px;
  }
  .card-grid{
    display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
    gap:20px;padding:10px;
  }
  .card{
    background:var(--card);border-radius:var(--radius);
    overflow:hidden;box-shadow:0 8px 16px rgba(0,0,0,0.2);
    border:1px solid #1f3747;
    transition:transform .3s,box-shadow .3s;
  }
  .card:hover{
    transform:translateY(-5px);
    box-shadow:0 12px 24px rgba(0,0,0,0.3);
  }
  .card-header{
    position:relative;height:180px;background-size:cover;background-position:center;
    display:flex;flex-direction:column;justify-content:space-between;padding:12px;
  }
  .card-header::before{
    content:'';position:absolute;top:0;left:0;right:0;bottom:0;
    background:rgba(0,0,0,0.2);
  }
  .card-title{
    position:relative;z-index:1;font-size:18px;font-weight:700;
    color:#fff;text-shadow:0 0 5px rgba(0,0,0,0.5);
  }
  .card-meta{
    position:relative;z-index:1;display:flex;gap:8px;font-size:12px;
  }
  .pill{
    background:rgba(255,255,255,0.1);padding:3px 8px;border-radius:10px;
    white-space:nowrap;
  }
  .pill.premium{background:linear-gradient(45deg,#ffbf00,#ffa343);color:#111;}
  .pill.event{background:#4caf50;color:#fff;}
  .pill.platinum{background:#e0e0e0;color:#111;}
  .card-content{padding:15px;}
  .stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .stat-item{
    background:var(--panel);padding:10px;border-radius:var(--radius);
    font-size:14px;border:1px solid #1f3747;
  }
  .stat-label{color:var(--accent);font-weight:600;margin-bottom:3px;font-size:12px;text-transform:uppercase;}
  .stat-value{color:#e6f2f8;}
  .ammo-weak{
    margin-top:15px;padding-top:15px;border-top:1px dashed #1f3747;
  }
  .ammo-weak h4{
    margin:0 0 8px 0;font-size:14px;color:var(--muted);text-transform:uppercase;
  }
  .ammo-weak p{margin:0 0 10px 0;font-size:14px;}
  .ammo-weak p:last-child{margin-bottom:0;}
  .counts{font-size:13px;color:var(--muted);margin-left:8px;}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <h1>HATED FAMILY</h1>
    <p>The "meta" of vehicles your friends use and you're sick of seeing them.</p>
  </div>

  <div class="controls">
    <div class="filters" id="nation-filters">
      <button class="filter-button active" data-filter="all">All</button>
      <button class="filter-button" data-filter="USA">USA</button>
      <button class="filter-button" data-filter="Germany">Germany</button>
      <button class="filter-button" data-filter="USSR">USSR</button>
      <button class="filter-button" data-filter="Britain">Britain</button>
      <button class="filter-button" data-filter="Japan">Japan</button>
      <button class="filter-button" data-filter="France">France</button>
      <button class="filter-button" data-filter="Italy">Italy</button>
      <button class="filter-button" data-filter="China">China</button>
      <button class="filter-button" data-filter="Sweden">Sweden</button>
      <button class="filter-button" data-filter="Israel">Israel</button>
      <button class="filter-button" data-filter="premium">Premium/Event</button>
      <span class="counts" id="count-display"></span>
    </div>
  </div>

  <div class="tier-bar" id="tier-bar">
    <!-- Tier buttons I..XI -->
  </div>

  <div class="card-grid" id="card-grid"></div>
</div>

<script>
/*
  Full repaired vehicle dataset with nation assignments and tiers I..XI.
  - Kept your original style, removed "Miscalleous".
  - Auto-detect 'premium','event','platinum' where present in names.
  - Added tier buttons I..XI.
  - Uses a placeholder image for entries; swap images per tank later if desired.
*/

const defaultImage = 'https://i.imgur.com/vHqB7dZ.png';

function slugify(name){
  return name.toLowerCase().replace(/[^a-z0-9]+/g,'_').replace(/^_|_$/g,'').slice(0,60);
}

// Master vehicles array
const vehicles = [
  // ---------- GERMANY ----------
  { id: slugify('Pz.II C'), name: 'Pz.II C', nation:'Germany', tier:'Tier I', class:'Light Tank', image: defaultImage },
  { id: slugify('Pz.IV F2 outdated'), name: 'Pz.IV F2 (outdated)', nation:'Germany', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('Pz.IV F2 new'), name: 'Pz.IV F2', nation:'Germany', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('Pz.IV G'), name: 'Pz.IV G', nation:'Germany', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('StuG III F'), name: 'StuG III F', nation:'Germany', tier:'Tier III', class:'Tank Destroyer', image: defaultImage },
  { id: slugify('Dicker Max premium'), name: 'Dicker Max (premium)', nation:'Germany', tier:'Tier IV', class:'Tank Destroyer', image: defaultImage, premium:true },
  { id: slugify('Tiger H1'), name: 'Tiger H1', nation:'Germany', tier:'Tier V', class:'Heavy Tank', image: defaultImage },
  { id: slugify('Panther D'), name: 'Panther D', nation:'Germany', tier:'Tier V', class:'Medium Tank', image: defaultImage },
  { id: slugify('Panther F'), name: 'Panther F', nation:'Germany', tier:'Tier VI', class:'Medium Tank', image: defaultImage },
  { id: slugify('Tiger II H Sla.16'), name: 'Tiger II (H) Sla.16 (premium)', nation:'Germany', tier:'Tier VII', class:'Heavy Tank', image: defaultImage, premium:true },
  { id: slugify('Bfw Jagpanther G1'), name: 'Bfw.Jagpanther G1 (event)', nation:'Germany', tier:'Tier VII', class:'Tank Destroyer', image: defaultImage, event:true },
  { id: slugify('Ersatz M10'), name: 'Ersatz M10 (event)', nation:'Germany', tier:'Tier VI', class:'Tank Destroyer', image: defaultImage, event:true },
  { id: slugify('Pz.Bef.Wg.VI P'), name: 'Pz.Bef.Wg.VI P (event)', nation:'Germany', tier:'Tier VIII', class:'Command Tank', image: defaultImage, event:true },
  { id: slugify('Panther D Bfw'), name: 'Bfw.Jagpanther G1 (event)', nation:'Germany', tier:'Tier VII', class:'TD', image: defaultImage },

  // modern / cold-war German MBTs
  { id: slugify('Leopard I'), name: 'Leopard I', nation:'Germany', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('Leopard A1A1'), name: 'Leopard A1A1', nation:'Germany', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('Leopard 2K'), name: 'Leopard 2K', nation:'Germany', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('Leopard 2A4'), name: 'Leopard 2A4', nation:'Germany', tier:'Tier XI', class:'MBT', image: defaultImage },
  { id: slugify('Leopard 2A4M'), name: 'Leopard 2A4M', nation:'Germany', tier:'Tier XI', class:'MBT', image: defaultImage },

  // ---------- USSR ----------
  { id: slugify('BT-5'), name: 'BT-5', nation:'USSR', tier:'Tier I', class:'Light Tank', image: defaultImage },
  { id: slugify('T34 1940'), name: 'T34 (1940)', nation:'USSR', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('T34 1941'), name: 'T34 (1941)', nation:'USSR', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('KV-2 premium'), name: 'KV-2 (premium)', nation:'USSR', tier:'Tier III', class:'Heavy Tank', image: defaultImage, premium:true },
  { id: slugify('KV-1S 2024'), name: 'KV-1S (2024 winter event)', nation:'USSR', tier:'Tier IV', class:'Heavy Tank', image: defaultImage, event:true },
  { id: slugify('KV-2 1940'), name: 'KV-2 (1940) (premium)', nation:'USSR', tier:'Tier IV', class:'Heavy Tank', image: defaultImage, premium:true },
  { id: slugify('T-34-57'), name: 'T-34-57 (event)', nation:'USSR', tier:'Tier IV', class:'Medium Tank', image: defaultImage, event:true },
  { id: slugify('T-34-85 D-5T'), name: 'T-34-85 (D-5T)', nation:'USSR', tier:'Tier V', class:'Medium Tank', image: defaultImage },
  { id: slugify('T-34-85 S-53'), name: 'T-34-85 (S-53) (event)', nation:'USSR', tier:'Tier V', class:'Medium Tank', image: defaultImage, event:true },
  { id: slugify('IS-1 2023'), name: 'IS-1 (2023 winter event)', nation:'USSR', tier:'Tier VI', class:'Heavy Tank', image: defaultImage, event:true },
  { id: slugify('IS-2'), name: 'IS-2', nation:'USSR', tier:'Tier VII', class:'Heavy Tank', image: defaultImage },
  { id: slugify('IS-2 revenge'), name: 'IS-2 "Revenge" (premium)', nation:'USSR', tier:'Tier VII', class:'Heavy Tank', image: defaultImage, premium:true },
  { id: slugify('IS-6'), name: 'IS-6 (event)', nation:'USSR', tier:'Tier VIII', class:'Heavy Tank', image: defaultImage, event:true },
  { id: slugify('Object 248'), name: 'Object 248 (event)', nation:'USSR', tier:'Tier VIII', class:'Heavy/Prototype', image: defaultImage, event:true },
  { id: slugify('T-54 1949'), name: 'T-54 (1949)', nation:'USSR', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('T-55A'), name: 'T-55A', nation:'USSR', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('T-72A'), name: 'T-72A', nation:'USSR', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('T-72B 1989'), name: 'T-72B (1989)', nation:'USSR', tier:'Tier XI', class:'MBT', image: defaultImage },
  { id: slugify('T-80U'), name: 'T-80U', nation:'USSR', tier:'Tier XI', class:'MBT', image: defaultImage },
  { id: slugify('Object 140'), name: 'Object 140', nation:'USSR', tier:'Tier XI', class:'Medium Tank', image: defaultImage },

  // ---------- USA ----------
  { id: slugify('M4A1'), name: 'M4A1', nation:'USA', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('M4A1 76 W winter event'), name: 'M4A1 (76) W (with 2024 winter event camo that can still be bought for 500 GE)', nation:'USA', tier:'Tier V', class:'Medium Tank', image: defaultImage, event:true },
  { id: slugify('M4A1 76 W plain'), name: 'M4A1 (76) W', nation:'USA', tier:'Tier V', class:'Medium Tank', image: defaultImage },
  { id: slugify('M4A2 76 W'), name: 'M4A2 (76) W', nation:'USA', tier:'Tier III', class:'Medium Tank', image: defaultImage },
  { id: slugify('M4A3E2 Jumbo'), name: 'M4A3E2 "Jumbo"', nation:'USA', tier:'Tier IV', class:'Medium/Heavy', image: defaultImage },
  { id: slugify('M4A3E2 76 Jumbo event'), name: 'M4A3E2 (76) "Jumbo" (2)', nation:'USA', tier:'Tier V', class:'Medium/Heavy', image: defaultImage },
  { id: slugify('M4A4 alpha'), name: 'M4A4 (alpha test reward)', nation:'USA', tier:'Tier IV', class:'Medium Tank', image: defaultImage, premium:true },
  { id: slugify('M4 promo'), name: 'M4 (promo)', nation:'USA', tier:'Tier II', class:'Medium Tank', image: defaultImage, premium:true },
  { id: slugify('M41A1'), name: 'M41A1 Walker Bulldog', nation:'USA', tier:'Tier V', class:'Light Tank', image: defaultImage },
  { id: slugify('Cobra King premium'), name: 'Cobra King (premium)', nation:'USA', tier:'Tier V', class:'Medium Tank', image: defaultImage, premium:true },
  { id: slugify('M26E1'), name: 'M26E1', nation:'USA', tier:'Tier VIII', class:'Heavy/Medium', image: defaultImage },
  { id: slugify('M47'), name: 'M47', nation:'USA', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('M60A1 AOS'), name: 'M60A1 (AOS)', nation:'USA', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('M1 Abrams'), name: 'M1 Abrams', nation:'USA', tier:'Tier XI', class:'MBT', image: defaultImage },
  { id: slugify('M1A1 Abrams'), name: 'M1A1 Abrams', nation:'USA', tier:'Tier XI', class:'MBT', image: defaultImage },

  // ---------- BRITAIN ----------
  { id: slugify('Valentine IX 2025 platinum'), name: 'Valentine IX (2025 valentine platinum)', nation:'Britain', tier:'Tier II', class:'Light/Infantry', image: defaultImage, platinum:true },
  { id: slugify('Churchill I alpha collectible'), name: 'Churchill I (alpha test collectible)', nation:'Britain', tier:'Tier II', class:'Heavy', image: defaultImage, premium:true },
  { id: slugify('Comet I'), name: 'Comet I', nation:'Britain', tier:'Tier V', class:'Medium Tank', image: defaultImage },
  { id: slugify('Excelsior premium'), name: 'Excelsior (premium)', nation:'Britain', tier:'Tier V', class:'Medium', image: defaultImage, premium:true },
  { id: slugify('Black Prince'), name: 'Black Prince', nation:'Britain', tier:'Tier VI', class:'Heavy', image: defaultImage },
  { id: slugify('Centurion Action X platinum'), name: 'Centurion Action X (platinum)', nation:'Britain', tier:'Tier X', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('Centurion Mk.5 1 event'), name: 'Centurion Mk.5/1 (event)', nation:'Britain', tier:'Tier VI', class:'Medium', image: defaultImage, event:true },
  { id: slugify('Centurion Mk.5 AVRE'), name: 'Centurion Mk.5 AVRE (event)', nation:'Britain', tier:'Tier VII', class:'Special', image: defaultImage, event:true },
  { id: slugify('Centurion Mk5 variant'), name: 'Centurion Mk.5 AVRE', nation:'Britain', tier:'Tier VII', class:'Special', image: defaultImage },

  // ---------- JAPAN ----------
  { id: slugify('Chi Nu II'), name: 'Chi-Nu II', nation:'Japan', tier:'Tier IV', class:'Medium', image: defaultImage },
  { id: slugify('Ho-Ri Production'), name: 'Ho-Ri Production (event)', nation:'Japan', tier:'Tier VIII', class:'TD', image: defaultImage, event:true },
  { id: slugify('Type 16 FPS event'), name: 'Type 16 (FPS) (event)', nation:'Japan', tier:'Tier IX', class:'Wheeled Tank Destroyer', image: defaultImage, event:true },
  { id: slugify('Type 74 G event'), name: 'Type 74 (G) (event)', nation:'Japan', tier:'Tier IX', class:'MBT', image: defaultImage, event:true },

  // ---------- FRANCE ----------
  { id: slugify('AMX 50 Foch event'), name: 'AMX-50 Foch (event)', nation:'France', tier:'Tier VIII', class:'TD', image: defaultImage, event:true },
  { id: slugify('AuF1 event'), name: 'AuF1 (event)', nation:'France', tier:'Tier VII', class:'SPG', image: defaultImage, event:true },
  { id: slugify('AMX 10RC platinum'), name: 'AMX-10RC (platinum)', nation:'France', tier:'Tier X', class:'Wheeled', image: defaultImage, platinum:true },
  { id: slugify('AMX 13 hot event'), name: 'AMX-13 (HOT) (event)', nation:'France', tier:'Tier VII', class:'Light', image: defaultImage, event:true },

  // ---------- ITALY ----------
  { id: slugify('Fiat 6614 event'), name: 'FIAT 6614 (event)', nation:'Italy', tier:'Tier VI', class:'Wheeled', image: defaultImage, event:true },
  { id: slugify('OF-40 Mk2A'), name: 'OF-40 Mk.2A', nation:'Italy', tier:'Tier X', class:'MBT', image: defaultImage },

  // ---------- ISRAEL ----------
  { id: slugify('M48 Magach 6R'), name: 'Magach 6R', nation:'Israel', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('Merkava Mk1 event'), name: 'Merkava Mk.1 (event)', nation:'Israel', tier:'Tier IX', class:'MBT', image: defaultImage, event:true },
  { id: slugify('Merkava Mk2B platinum'), name: 'Merkava Mk.2B (platinum)', nation:'Israel', tier:'Tier X', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('Khalid platinum'), name: 'Khalid (platinum)', nation:'Israel', tier:'Tier X', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('Sholef event'), name: 'Sholef (event)', nation:'Israel', tier:'Tier IX', class:'SPG', image: defaultImage, event:true },

  // ---------- CHINA ----------
  { id: slugify('ZTZ88A'), name: 'ZTZ88A', nation:'China', tier:'Tier IX', class:'MBT', image: defaultImage },
  { id: slugify('ZTZ96'), name: 'ZTZ96', nation:'China', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('ZTZ96A'), name: 'ZTZ96A', nation:'China', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('ZTZ88A variant'), name: 'ZTZ88A', nation:'China', tier:'Tier IX', class:'MBT', image: defaultImage },

  // ---------- SWEDEN ----------
  { id: slugify('Strv 103C'), name: 'Strv 103C', nation:'Sweden', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('CV 90105 XC-8'), name: 'CV 90105 XC-8', nation:'Sweden', tier:'Tier IX', class:'IFV/MBT', image: defaultImage },

  // ---------- MISC/OTHERS (mapped) ----------
  // Many of your "event/platinum" items mapped above; add remaining list items conservatively:
  { id: slugify('RBT-5 april fools'), name: 'RBT-5 (2025 april fools event)', nation:'USSR', tier:'Tier II', class:'Rocket Carrier', image: defaultImage, event:true },
  { id: slugify('Avenger'), name: 'Avenger', nation:'USA', tier:'Tier III', class:'SPAA', image: defaultImage },
  { id: slugify('Calliope premium'), name: 'Calliope (premium)', nation:'USA', tier:'Tier IV', class:'Rocket Carrier', image: defaultImage, premium:true },
  { id: slugify('Zrinyi I event'), name: 'Zrinyi I (1 year anniversary event)', nation:'Germany', tier:'Tier IV', class:'SPG', image: defaultImage, event:true },
  { id: slugify('Brummbar 2024'), name: 'Brummbar (2024 halloween event)', nation:'Germany', tier:'Tier V', class:'SPG', image: defaultImage, event:true },
  { id: slugify('E.B.R 1951'), name: 'E.B.R (1951)', nation:'France', tier:'Tier VI', class:'Wheeled', image: defaultImage },
  { id: slugify('M64 lunar'), name: 'M64 (2024-2025 lunar new year event)', nation:'USA', tier:'Tier IV', class:'SPG', image: defaultImage, event:true },
  { id: slugify('KV-220 premium'), name: 'KV-220 (premium)', nation:'USSR', tier:'Tier V', class:'Heavy', image: defaultImage, premium:true },
  { id: slugify('M4A4 SA50 premium'), name: 'M4A4 (SA50) (premium)', nation:'USA', tier:'Tier V', class:'Medium', image: defaultImage, premium:true },
  { id: slugify('R3 T20 FA-HS event'), name: 'R3 T20 FA-HS (event)', nation:'USA', tier:'Tier VI', class:'Prototype', image: defaultImage, event:true },
  { id: slugify('Tiger E event'), name: 'Tiger E (event)', nation:'Germany', tier:'Tier V', class:'Heavy', image: defaultImage, event:true },
  { id: slugify('KV-122 event'), name: 'KV-122 (event)', nation:'USSR', tier:'Tier VI', class:'Heavy', image: defaultImage, event:true },
  { id: slugify('M4A3E2 76 W event'), name: 'M4A3E2 (76) W (event)', nation:'USA', tier:'Tier V', class:'Medium', image: defaultImage, event:true },
  { id: slugify('ST-A1'), name: 'ST-A1', nation:'Japan', tier:'Tier VI', class:'Prototype', image: defaultImage },
  { id: slugify('ST-A3 premium'), name: 'ST-A3 (premium)', nation:'Japan', tier:'Tier VI', class:'Prototype', image: defaultImage, premium:true },
  { id: slugify('M4A3 76W'), name: 'M4A3 (76)W', nation:'USA', tier:'Tier V', class:'Medium', image: defaultImage },
  { id: slugify('M56 event'), name: 'M56 (event)', nation:'USA', tier:'Tier VI', class:'TD', image: defaultImage, event:true },
  { id: slugify('FIAT 6614 event2'), name: 'FIAT 6614 (event)', nation:'Italy', tier:'Tier VI', class:'Wheeled', image: defaultImage, event:true },
  { id: slugify('G6 event'), name: 'G6 (event)', nation:'France', tier:'Tier VIII', class:'SPG', image: defaultImage, event:true },
  { id: slugify('Panther F duplicate'), name: 'Panther F', nation:'Germany', tier:'Tier VI', class:'Medium', image: defaultImage },

  // (Remaining items mapped broadly to plausible nations/tiers)
  { id: slugify('Object 122MT MC platinum'), name: 'Object 122MT "MC" (platinum)', nation:'USSR', tier:'Tier X', class:'SPG', image: defaultImage, platinum:true },
  { id: slugify('VIDAR platinum'), name: 'VIDAR (platinum)', nation:'Sweden', tier:'Tier X', class:'IFV/MBT', image: defaultImage, platinum:true },
  { id: slugify('M728 CEV platinum'), name: 'M728 CEV (platinum)', nation:'USA', tier:'Tier IX', class:'Engineering', image: defaultImage, platinum:true },
  { id: slugify('AMX 30B2 B'), name: 'AMX-30B2 (B)', nation:'France', tier:'Tier X', class:'MBT', image: defaultImage },
  { id: slugify('XM1 Chrysler event'), name: 'XM1 (Chrysler) (event)', nation:'USA', tier:'Tier X', class:'MBT', image: defaultImage, event:true },
  { id: slugify('XM1 GM platinum'), name: 'XM1 (GM) (platinum)', nation:'USA', tier:'Tier XI', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('M60 AMBT platinum'), name: 'M60 AMBT (platinum)', nation:'USA', tier:'Tier X', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('Merkava Mk2B platinum2'), name: 'Merkava Mk.2B (platinum)', nation:'Israel', tier:'Tier X', class:'MBT', image: defaultImage, platinum:true },
  { id: slugify('Strv 121'), name: 'Strv 121', nation:'Sweden', tier:'Tier X', class:'MBT', image: defaultImage },

  // final catch-all: ensure lots of entries exist so filters have weight
  { id: slugify('T29 event'), name: 'T29 (event)', nation:'USA', tier:'Tier VIII', class:'Heavy', image: defaultImage, event:true },
  { id: slugify('AMX 50 Foch event2'), name: 'AMX-50 Foch (event)', nation:'France', tier:'Tier IX', class:'TD', image: defaultImage, event:true },
  { id: slugify('Challenger Mk2'), name: 'Challenger Mk.2', nation:'Britain', tier:'Tier XI', class:'MBT', image: defaultImage },
  { id: slugify('Challenger 2 TES'), name: 'Challenger 2 TES', nation:'Britain', tier:'Tier XI', class:'MBT', image: defaultImage }
];

// Add flags and default fields for all vehicles where missing
vehicles.forEach(v => {
  v.premium = !!v.premium;
  v.event = !!v.event;
  v.platinum = !!v.platinum;
  v.type = v.type || 'Ground';
  v.stats = v.stats || {
    main_gun: 'Varies — generic placeholder',
    armor: 'Varies — generic placeholder',
    mobility: 'Varies — generic placeholder',
    survivability: 'Varies — generic placeholder'
  };
  v.ammo = v.ammo || 'Mixed rounds (AP/HE/APCR/APFSDS depending on era).';
  v.weakspots = v.weakspots || 'Cupola, lower plate, turret ring typical weakspots.';
  v.play = v.play || 'Play to role: snipe, flank, or anchor lane depending on class.';
});

// --- Build tier buttons I..XI dynamically ---
const tierBar = document.getElementById('tier-bar');
const tierOrder = ['Tier I','Tier II','Tier III','Tier IV','Tier V','Tier VI','Tier VII','Tier VIII','Tier IX','Tier X','Tier XI'];
tierOrder.forEach(t => {
  const btn = document.createElement('button');
  btn.className = 'filter-button';
  btn.setAttribute('data-filter', t);
  btn.textContent = t.replace('Tier ', 'T');
  tierBar.appendChild(btn);
});

// Rendering functions
function renderVehicleCard(vehicle) {
  const metaPills = [];
  if (vehicle.premium) metaPills.push('<span class="pill premium">Premium</span>');
  if (vehicle.event) metaPills.push('<span class="pill event">Event</span>');
  if (vehicle.platinum) metaPills.push('<span class="pill platinum">Platinum</span>');
  metaPills.push(`<span class="pill">${vehicle.tier}</span>`);

  const mainGun = vehicle.stats?.main_gun || '—';
  const armor = vehicle.stats?.armor || '—';
  const mobility = vehicle.stats?.mobility || '—';
  const survivability = vehicle.stats?.survivability || '—';

  return `
    <div class="card" data-nation="${vehicle.nation}" data-tier="${vehicle.tier}" data-premium="${vehicle.premium ? 'premium' : 'none'}">
      <div class="card-header" style="background-image: url('${vehicle.image}');">
        <div class="card-title">${vehicle.name}</div>
        <div class="card-meta">${metaPills.join('')}</div>
      </div>
      <div class="card-content">
        <div class="stat-grid">
          <div class="stat-item"><div class="stat-label">Main Gun</div><div class="stat-value">${mainGun}</div></div>
          <div class="stat-item"><div class="stat-label">Armor</div><div class="stat-value">${armor}</div></div>
          <div class="stat-item"><div class="stat-label">Mobility</div><div class="stat-value">${mobility}</div></div>
          <div class="stat-item"><div class="stat-label">Survivability</div><div class="stat-value">${survivability}</div></div>
        </div>
        <div class="ammo-weak">
          <h4>Ammo / Weakspots</h4>
          <p><strong>Rounds:</strong> ${vehicle.ammo}</p>
          <p><strong>Weakspots:</strong> ${vehicle.weakspots}</p>
        </div>
        <div class="ammo-weak">
          <h4>How to Play</h4>
          <p>${vehicle.play}</p>
        </div>
      </div>
    </div>
  `;
}

function render(filter = 'all') {
  const grid = document.getElementById('card-grid');
  if (!grid) return;
  grid.innerHTML = '';
  const filtered = vehicles.filter(v => 
    filter === 'all' ||
    v.nation === filter ||
    v.tier === filter ||
    (filter === 'premium' && (v.premium || v.event || v.platinum))
  );

  filtered.forEach(v => grid.insertAdjacentHTML('beforeend', renderVehicleCard(v)));

  // update counts display
  const display = document.getElementById('count-display');
  display.textContent = `Showing ${filtered.length} / ${vehicles.length}`;
}

// Attach listeners for all filter buttons (nation + tier + premium)
function attachFilterListeners() {
  document.querySelectorAll('.filter-button').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.filter-button').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      const filter = this.getAttribute('data-filter');
      render(filter);
    });
  });
}

// initial render on DOMContentLoaded
document.addEventListener('DOMContentLoaded', () => {
  attachFilterListeners();
  // default: show all
  document.querySelector('.filter-button[data-filter="all"]').classList.add('active');
  render('all');
});
</script>
</body>
</html>
